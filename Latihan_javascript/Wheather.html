<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ğŸŒ¤ Weather App by Danny</title>

    <!-- âœ… Bootstrap 5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="wheater.css" />
    <!--  -->
  </head>

  <body>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-6 col-lg-4">
          <div class="card text-center p-4">
            <h2 class="mb-4">ğŸŒ¤ Weather App</h2>

            <div class="input-group mb-3">
              <input type="text" id="cityInput" class="form-control text-center" placeholder="Masukkan nama kota..." />
              <button class="btn btn-primary" onclick="getWeather()">Cari</button>
            </div>

            <div id="result"></div>

            <div class="mt-3">
              <button class="btn btn-outline-light btn-sm" onclick="toggleMode()">ğŸŒ™ Ganti Mode</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- âœ… Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      const apiKey = '1a25d1a58696319ac13360f49c14a2eb';
      const resultDiv = document.getElementById('result');

      // ğŸŒ“ Auto detect dark mode sistem
      document.body.classList.add(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark-mode' : 'light-mode');

      function toggleMode() {
        document.body.classList.toggle('dark-mode');
        document.body.classList.toggle('light-mode');
      }

      async function getWeather() {
        const city = document.getElementById('cityInput').value.trim();

        if (!city) {
          resultDiv.innerHTML = '<p class="error">âš ï¸ Harap masukkan nama kota.</p>';
          return;
        }

        // ğŸŒ€ Tampilkan spinner loading
        resultDiv.innerHTML = `
          <div class="d-flex justify-content-center">
            <div class="spinner-border" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
          <p class="mt-2">Mengambil data cuaca...</p>
        `;

        const url = `https://api.openweathermap.org/data/2.5/weather?q=${city},id&appid=1a25d1a58696319ac13360f49c14a2eb&units=metric&lang=id`;

        try {
          const response = await fetch(url);
          const data = await response.json();

          if (response.status !== 200) {
            throw new Error(data.message || 'Kota tidak ditemukan!');
          }

          const icon = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;

          resultDiv.innerHTML = `
            <div class="mt-3 animate__animated animate__fadeIn">
              <h4>${data.name}, ${data.sys.country}</h4>
              <img src="${icon}" alt="Weather Icon" class="weather-icon my-2" />
              <ul class="list-group list-group-flush text-start bg-transparent">
                <li class="list-group-item bg-transparent text-white"><b>ğŸŒ¡ Suhu:</b> ${data.main.temp}Â°C</li>
                <li class="list-group-item bg-transparent text-white"><b>ğŸŒ¥ Cuaca:</b> ${data.weather[0].description}</li>
                <li class="list-group-item bg-transparent text-white"><b>ğŸ’§ Kelembapan:</b> ${data.main.humidity}%</li>
                <li class="list-group-item bg-transparent text-white"><b>ğŸ’¨ Angin:</b> ${data.wind.speed} m/s</li>
              </ul>
            </div>
          `;
        } catch (error) {
          resultDiv.innerHTML = `<p class="error"> Error: ${error.message}</p>`;
        }
      }
    </script>
  </body>
</html>
